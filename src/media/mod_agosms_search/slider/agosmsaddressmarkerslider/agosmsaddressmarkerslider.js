document.addEventListener('DOMContentLoaded',function(){var e=document.querySelectorAll('.agSliderField');[].forEach.call(e,function(e){var a=parseInt(e.getAttribute('data-slider-min')),r=parseInt(e.getAttribute('data-slider-max')),l=e.parentNode.parentNode,o=l.getElementsByTagName('input'),n=o[0],s=o[2],i=o[3],t=new Slider(e,{range:!0,value:[a,r]});
n.onchange=function(){var o=n.value.split('-').map(Number);
if(o[0]<a){o[0]=a};
if(o[1]>r){o[1]=r};
if(o[0]>o[1]){o[1]=o[0]};
n.value=o[0]+' - '+o[1];
s.value=o[0];
i.value=o[1];
e.value=o[0]+','+o[1];
console.log(t);
console.log(t.getValue());
t.setValue([o[0],o[1]]);
t.refresh({useCurrentValue:!0})};
t.on('slideStart',function(e){t.sliderLock=1});
t.on('slide',function(e){n.value=e[0]+' - '+e[1]});
t.on('slideStop',function(e){n.value=e[0]+' - '+e[1];
s.value=e[0];
i.value=e[1];
t.sliderLock=0})})});
document.addEventListener('click',function(e){if(e.target.classList.contains('agosmsaddressmarkerbutton')){var r=e.target,o=r.parentNode,t=o.getElementsByTagName('input'),s=t[0],i=t[1],l=t[2];
addressstring=l.value;
var n=function(e,t){if(!t&&e.length===1){s.value=e[0].lat;
i.value=e[0].lon;
Joomla.renderMessages({'notice':[(Joomla.JText._('PLG_AGOSMSSEARCH_ADDRESSE_NOTICE')+addressstring+' (Nominatim)')]})}
else if(e.length>0){}
else{Joomla.renderMessages({'error':[Joomla.JText._('MOD_AGOSMSSEARCH_ADDRESSE_ERROR')+addressstring+' (Nominatim)']})}},a={q:addressstring,limit:1,format:'json',addressdetails:1};
getJSON('https://nominatim.openstreetmap.org/',a,n)}});
function getJSON(t,n,a){var e=new XMLHttpRequest();
e.onreadystatechange=function(){if(e.readyState!==4){return};
if(e.status!==200&&e.status!==304){a('');
return};
a(e.response)};
e.open('GET',t+getParamString(n),!0);
e.responseType='json';
e.setRequestHeader('Accept','application/json');
e.send(null)};
function getParamString(e,t,s){var o=[];
for(var r in e){var i=encodeURIComponent(s?r.toUpperCase():r),n=e[r];
if(!L.Util.isArray(n)){o.push(i+'='+encodeURIComponent(n))}
else{for(var a=0;a<n.length;a++){o.push(i+'='+encodeURIComponent(n[a]))}}};
return(!t||t.indexOf('?')===-1?'?':'&')+o.join('&')};